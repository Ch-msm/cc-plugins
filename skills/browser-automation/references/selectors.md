# å…ƒç´ é€‰æ‹©å™¨æœ€ä½³å®è·µ

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•æœ‰æ•ˆåœ°ä½¿ç”¨ uid é€‰æ‹©å™¨è¿›è¡Œæµè§ˆå™¨è‡ªåŠ¨åŒ–ã€‚

## uid ç”Ÿå‘½å‘¨æœŸ

### ä»€ä¹ˆæ˜¯ uidï¼Ÿ

uidï¼ˆUnique Identifierï¼‰æ˜¯ç”± `take_snapshot` å·¥å…·ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºå¼•ç”¨é¡µé¢ä¸Šçš„ç‰¹å®šå…ƒç´ ã€‚

### uid ç”Ÿå‘½å‘¨æœŸè§„åˆ™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ take_snapshot â”‚  â† ç”Ÿæˆ uid
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä½¿ç”¨ uid äº¤äº’ â”‚  â† click/fill/hover
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¡µé¢å‘ç”Ÿå˜åŒ–?    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
     æ˜¯â”‚      â”‚å¦
       â”‚      â”‚
       â–¼      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚é‡æ–°å¿«ç…§   â”‚ â”‚ç»§ç»­ä½¿ç”¨  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¡µé¢å˜åŒ–åˆ¤æ–­

| æ“ä½œ | æ˜¯å¦æ”¹å˜é¡µé¢ | æ˜¯å¦éœ€è¦é‡æ–°å¿«ç…§ |
|------|-------------|-----------------|
| `navigate_page` | âœ… æ˜¯ | âœ… å¿…é¡» |
| `click` (é“¾æ¥/æŒ‰é’®) | âš ï¸ å¯èƒ½ | âš ï¸ å»ºè®® |
| `fill` | âŒ å¦ | âŒ ä¸éœ€è¦ |
| `fill_form` | âŒ å¦ | âŒ ä¸éœ€è¦ |
| `press_key(Enter)` | âš ï¸ å¯èƒ½ | âš ï¸ å»ºè®® |
| `hover` | âŒ å¦ | âŒ ä¸éœ€è¦ |
| `evaluate_script` | âš ï¸ å¯èƒ½ | âš ï¸ å–å†³äºè„šæœ¬ |

## ç¨³å®šé€‰æ‹©å™¨ç­–ç•¥

### 1. ä¼˜å…ˆçº§æ’åº

å½“å¤šä¸ªå…ƒç´ å¯èƒ½åŒ¹é…æ—¶ï¼ŒæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§é€‰æ‹©ï¼š

```
1. data-testid (æœ€ç¨³å®š)
2. aria-label (è¯­ä¹‰åŒ–)
3. id (ç›¸å¯¹ç¨³å®š)
4. name (è¡¨å•å…ƒç´ )
5. æ–‡æœ¬å†…å®¹ (å¯è§æ–‡æœ¬)
6. CSS ç±»å (æœ€ä¸ç¨³å®š)
```

### 2. ä½¿ç”¨ data-testid

```html
<!-- æ¨è -->
<button data-testid="submit-button">æäº¤</button>

<!-- ä¸æ¨è -->
<button class="btn btn-primary btn-lg">æäº¤</button>
```

```python
# ä½¿ç”¨å¿«ç…§ä¸­çš„ uid
take_snapshot()
click(uid="1_23")  # å¯¹åº” data-testid="submit-button"
```

### 3. åˆ©ç”¨è¯­ä¹‰åŒ–æ ‡ç­¾

```html
<!-- æ¨è -->
<input aria-label="ç”¨æˆ·å" type="text">
<button aria-label="æœç´¢">ğŸ”</button>

<!-- ä¸æ¨è -->
<input class="form-control input-lg">
<button class="icon-button"></button>
```

## å¿«ç…§è§£è¯»

### å¿«ç…§æ ¼å¼

```
[1_1] document Document https://example.com
  [1_2] banner Banner
    [1_3] link "é¦–é¡µ"
    [1_4] link "å…³äº"
  [1_5] main Main
    [1_6] heading "æ¬¢è¿"
    [1_7] textbox "æœç´¢"
    [1_8] button "æäº¤"
    [1_9] link "äº†è§£æ›´å¤š"
```

### uid æ ¼å¼è¯´æ˜

```
uid æ ¼å¼: [ä»£é™…_ç´¢å¼•]
ä¾‹å¦‚: [1_23]

- ä»£ä»£ä»£ (ç¬¬ä¸€ä¸ªæ•°å­—): é¡µé¢å˜åŒ–çš„ä»£é™…
- ç´¢å¼• (ç¬¬äºŒä¸ªæ•°å­—): è¯¥ä»£é™…ä¸­çš„å…ƒç´ åºå·
```

### è§£ææŠ€å·§

```python
# æ‰¾åˆ°æœç´¢æ¡†
take_snapshot()
# åœ¨å¿«ç…§ä¸­æ‰¾åˆ°: [1_7] textbox "æœç´¢"
click(uid="1_7")
fill(uid="1_7", value="å…³é”®è¯")
```

## åŠ¨æ€å†…å®¹å¤„ç†

### 1. ç­‰å¾…å…ƒç´ å‡ºç°

```python
# æ–¹æ³• 1: ç­‰å¾…æ–‡æœ¬
wait_for(text="åŠ è½½å®Œæˆ", timeout=5000)
take_snapshot()

# æ–¹æ³• 2: å¾ªç¯æ£€æŸ¥
for i in range(5):
    take_snapshot()
    # æ£€æŸ¥å¿«ç…§ä¸­æ˜¯å¦åŒ…å«ç›®æ ‡å…ƒç´ 
    if "ç›®æ ‡æŒ‰é’®" in snapshot:
        break
    time.sleep(1)
```

### 2. å¤„ç†åŠ è½½çŠ¶æ€

```python
# ç­‰å¾…åŠ è½½å®Œæˆ
take_snapshot()
click(uid="1_10")  # ç‚¹å‡»åŠ è½½æŒ‰é’®

# ç­‰å¾…åŠ è½½æŒ‡ç¤ºå™¨æ¶ˆå¤±
wait_for(text="å®Œæˆ", timeout=5000)

# é‡æ–°å¿«ç…§è·å–æ›´æ–°åçš„å…ƒç´ 
take_snapshot()
```

### 3. å¤„ç†åˆ†é¡µå†…å®¹

```python
# ç¬¬ä¸€é¡µ
take_snapshot()
# æå–æ•°æ®...
click(uid="1_50")  # ä¸‹ä¸€é¡µ

# ç­‰å¾…æ–°é¡µé¢åŠ è½½
wait_for(text="ç¬¬2é¡µ", timeout=3000)
take_snapshot()

# ç»§ç»­æå–...
```

## é”šç‚¹é€‰æ‹©

### ä»€ä¹ˆæ˜¯é”šç‚¹ï¼Ÿ

é”šç‚¹æ˜¯ä¸€ä¸ªåœ¨é¡µé¢å˜åŒ–å‰åéƒ½ä¿æŒç¨³å®šçš„å…ƒç´ ï¼Œç”¨äºå®šä½å…¶ä»–å…ƒç´ ã€‚

### é”šç‚¹ä½¿ç”¨ç¤ºä¾‹

```python
# 1. æ‰¾åˆ°é”šç‚¹ï¼ˆç¨³å®šçš„æ ‡é¢˜ï¼‰
take_snapshot()
# [1_5] heading "ç”¨æˆ·ä¿¡æ¯"

# 2. å®šä½ç›¸å¯¹å…ƒç´ 
# [1_6] textbox "ç”¨æˆ·å" (åœ¨æ ‡é¢˜ä¸‹æ–¹)
# [1_7] textbox "é‚®ç®±" (åœ¨ç”¨æˆ·åä¸‹æ–¹)

fill(uid="1_6", value="admin")
fill(uid="1_7", value="admin@example.com")
```

## å¸¸è§é—®é¢˜

### Q: uid æ ¼å¼å˜äº†æ€ä¹ˆåŠï¼Ÿ

**A**: é¡µé¢å˜åŒ–å uid ä¼šé‡æ–°ç”Ÿæˆã€‚å¿…é¡»é‡æ–° `take_snapshot` è·å–æ–°çš„ uidã€‚

### Q: å¦‚ä½•æ‰¾åˆ°ç‰¹å®šå…ƒç´ ï¼Ÿ

**A**:
1. ä½¿ç”¨ `take_snapshot(verbose=true)` è·å–è¯¦ç»†ä¿¡æ¯
2. åœ¨å¿«ç…§ä¸­æœç´¢å…ƒç´ çš„æ–‡æœ¬æˆ–ç±»å‹
3. ä½¿ç”¨å¯¹åº”çš„ uid

### Q: å…ƒç´ æ²¡æœ‰æ˜æ˜¾æ ‡è¯†æ€ä¹ˆåŠï¼Ÿ

**A**:
1. ä½¿ç”¨å‘¨å›´çš„ç¨³å®šå…ƒç´ ä½œä¸ºé”šç‚¹
2. æ ¹æ®å…ƒç´ åœ¨å¿«ç…§ä¸­çš„ç›¸å¯¹ä½ç½®å®šä½
3. è€ƒè™‘ä½¿ç”¨ `evaluate_script` é€šè¿‡ DOM æŸ¥è¯¢

### Q: å¿«ç…§ä¸­å…ƒç´ å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ

**A**:
1. ä½¿ç”¨ `verbose=false` è·å–ç®€åŒ–å¿«ç…§
2. åœ¨å¿«ç…§è¾“å‡ºä¸­æœç´¢å…³é”®è¯
3. ä½¿ç”¨ `includeSnapshot` å‚æ•°åœ¨äº¤äº’åè‡ªåŠ¨è·å–æ–°å¿«ç…§

## é«˜çº§æŠ€å·§

### 1. ä½¿ç”¨ includeSnapshot

```python
# ç‚¹å‡»åè‡ªåŠ¨è·å–æ–°å¿«ç…§
click(uid="1_10", includeSnapshot=true)

# ç«‹å³ä½¿ç”¨æ–°çš„ uid è¿›è¡Œåç»­æ“ä½œ
# è€Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ take_snapshot
```

### 2. ä¿å­˜å¿«ç…§ä¾›åˆ†æ

```python
# ä¿å­˜å¿«ç…§åˆ°æ–‡ä»¶
take_snapshot(filePath="/tmp/snapshot.txt")

# åç»­å¯ä»¥è¯»å–åˆ†æ
with open("/tmp/snapshot.txt") as f:
    content = f.read()
    # åˆ†ææˆ–æœç´¢å…ƒç´ ...
```

### 3. ä½¿ç”¨ JavaScript è¾…åŠ©

```python
# å½“å¿«ç…§æ— æ³•å®šä½æ—¶ï¼Œä½¿ç”¨ JavaScript
evaluate_script(function="""
() => {
    // é€šè¿‡å±æ€§æŸ¥æ‰¾å…ƒç´ 
    const elem = document.querySelector('[data-testid="submit"]');
    if (elem) {
        elem.click();
        return { clicked: true };
    }
    return { clicked: false };
}
""")
```

## è°ƒè¯•å»ºè®®

### 1. æ€»æ˜¯å…ˆå¿«ç…§

```python
# å¥½çš„åšæ³•
take_snapshot()
# æŸ¥çœ‹å¿«ç…§è¾“å‡ºï¼Œæ‰¾åˆ°æ­£ç¡®çš„ uid
click(uid="æ­£ç¡®çš„_uid")

# ä¸å¥½çš„åšæ³•
click(uid="çŒœæµ‹çš„_uid")  # uid å¯èƒ½é”™è¯¯
```

### 2. éªŒè¯å…ƒç´ å­˜åœ¨

```python
take_snapshot()
# åœ¨è¾“å‡ºä¸­ç¡®è®¤:
# 1. uid å­˜åœ¨
# 2. å…ƒç´ ç±»å‹æ­£ç¡®
# 3. æ–‡æœ¬å†…å®¹åŒ¹é…
```

### 3. æˆªå›¾è¾…åŠ©

```python
# å¿«ç…§åæˆªå›¾ï¼Œå¯è§†åŒ–ç¡®è®¤
take_snapshot()
take_screenshot(filePath="/tmp/before_click.png")
click(uid="1_10")
take_screenshot(filePath="/tmp/after_click.png")
```

## æœ€ä½³å®è·µæ€»ç»“

1. **æ¯æ¬¡æ“ä½œå‰å…ˆå¿«ç…§** - ç¡®ä¿ä½¿ç”¨æœ€æ–°çš„ uid
2. **é¡µé¢å˜åŒ–åé‡æ–°å¿«ç…§** - uid ä¸ä¼šè·¨é¡µé¢å˜åŒ–ä¿æŒæœ‰æ•ˆ
3. **ä½¿ç”¨ç¨³å®šçš„é”šç‚¹** - ä¼˜å…ˆé€‰æ‹©æœ‰æ˜ç¡®æ ‡è¯†çš„å…ƒç´ 
4. **ä¿å­˜å¿«ç…§ç”¨äºè°ƒè¯•** - é‡åˆ°é—®é¢˜æ—¶å¯å›æº¯åˆ†æ
5. **ç»“åˆæˆªå›¾éªŒè¯** - å¯è§†åŒ–ç¡®è®¤æ“ä½œç»“æœ
